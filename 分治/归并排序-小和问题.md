让我们详细分解数组 `[1, 3, 5, 2, 4, 6]` 的小和计算过程：

<img src=../assets/归并排序-小和问题.jpg width=60% />

---

### **1. 分解与递归处理**
通过归并排序的分治策略，数组被逐步拆分为子数组，直到每个子数组长度为1。递归结束后，开始合并并计算小和。

---

### **2. 左半部分 `[0-2]`（子数组 `[1, 3, 5]`）**

#### **步骤 2.1：处理子数组 `[0-1]`**
- **分解**：分为 `[0-0]`（`[1]`）和 `[1-1]`（`[3]`）。
- **合并与计算**：
  - 左子数组 `[1]`，右子数组 `[3]`。
  - 右边元素 `3`，左边元素 `1` ≤ `3`，小和累加 `1`。
  - **Merge 结果**：小和为 `1`，合并后数组为 `[1, 3]`。

#### **步骤 2.2：处理子数组 `[2-2]`（`[5]`）**
- 单元素，小和为 `0`。

#### **步骤 2.3：合并 `[0-1]` 和 `[2-2]`**
- 左子数组 `[1, 3]`，右子数组 `[5]`。
- 右边元素 `5`，左边元素 `1` 和 `3` 均 ≤ `5`，小和累加 `1 + 3 = 4`。
- **Merge 结果**：小和为 `4`，合并后数组为 `[1, 3, 5]`。
- **左半部分总小和**：`1（步骤 2.1） + 0（步骤 2.2） + 4（步骤 2.3） = 5`。

---

### **3. 右半部分 `[3-5]`（子数组 `[2, 4, 6]`）**

#### **步骤 3.1：处理子数组 `[3-4]`**
- **分解**：分为 `[3-3]`（`[2]`）和 `[4-4]`（`[4]`）。
- **合并与计算**：
  - 左边元素 `2` ≤ `4`，小和累加 `2`。
  - **Merge 结果**：小和为 `2`，合并后数组为 `[2, 4]`。

#### **步骤 3.2：处理子数组 `[5-5]`（`[6]`）**
- 单元素，小和为 `0`。

#### **步骤 3.3：合并 `[3-4]` 和 `[5-5]`**
- 左子数组 `[2, 4]`，右子数组 `[6]`。
- 右边元素 `6`，左边元素 `2` 和 `4` 均 ≤ `6`，小和累加 `2 + 4 = 6`。
- **Merge 结果**：小和为 `6`，合并后数组为 `[2, 4, 6]`。
- **右半部分总小和**：`2（步骤 3.1） + 0（步骤 3.2） + 6（步骤 3.3） = 8`。

---

### **4. 合并左右整体 `[0-5]`**

#### **步骤 4.1：合并 `[1, 3, 5]` 和 `[2, 4, 6]`**
- **左边元素依次与右边比较**：
  - 右边元素 `2`：左边 `1` ≤ `2` → 小和 `1`。
  - 右边元素 `4`：左边 `1, 3` ≤ `4` → 小和 `1 + 3 = 4`。
  - 右边元素 `6`：左边 `1, 3, 5` ≤ `6` → 小和 `1 + 3 + 5 = 9`。
- **Merge 结果**：小和为 `1 + 4 + 9 = 14`，合并后数组为 `[1, 2, 3, 4, 5, 6]`。

---

### **5. 总小和计算**
- **左半部分贡献**：`5`
- **右半部分贡献**：`8`
- **合并贡献**：`14`
- **最终结果**：`5 + 8 + 14 = 27`

---

### **关键步骤总结**
1. **左半部分分解**：累计小和为 `5`。
2. **右半部分分解**：累计小和为 `8`。
3. **整体合并**：计算跨左右的小和 `14`。
4. **总和**：`5 + 8 + 14 = 27`。

此过程通过归并排序的分治策略，高效统计了每个元素左侧较小值的总和，最终得到正确的小和结果 **27**。